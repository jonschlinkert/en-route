# en-route [![NPM version](https://badge.fury.io/js/en-route.svg)](http://badge.fury.io/js/en-route)

> Routing for static site generators and build systems, heavily based on express.js and kerouac routes.

## Install
#### Install with [npm](npmjs.org)

```bash
npm i en-route --save
```


## API

### [Router](lib/router.js#L21)

Initialize a new `Router` with the given `options`.

* `options` **{Object}**    

```js
var Router = require('en-route');
var router = new Router(options);
```

### [.route](lib/router.js#L62)

Create a route for a `filter` that will call a `middleware` stack when the `filter` is matched.

* `filter` **{Function|String}**: Either a string to match on or a function that filters.    
* `middleware` **{Function|Array}**: Middleware stack.    
* `returns`: {Object}  

```js
// using a filepath as the filter
router.route('/path/to/:filename.md', function (key, value, next) {
  // process value
  value.content = markdown(value.content);
  value.options.ext = '.html'

  // use the params from the filepath (:filename)
  console.log(this.params.filename);

  // done, so call the next middleware
  next();
});

// using a function as the filter
router.route(function (key, value) {
  // only process files that are not drafts
  return (!('drafts' in value.data) || (!value.data.draft && value.data.draft === false));
}, function (key, value, next) {
  // process value
  // done, so call the next middleware
  next();
});
```

### [.middleware](lib/router.js#L109)

Call the dispatcher on on arguments

* `arguments` **{arguments}**: Any arguments are passed through the dispatcher. The arguments must match the arguments expected by the filter and middleware.    
* `next` **{Function}**: Callback.    
* `returns`: {Object}  

```js
var page = {
  path: 'some/file/path.md',
  data: {
    draft: false
  },
  options: {
    ext: '.md'
  }
};
router.middleware(page.path, page, function (err) {
  if (err) {
    // something bad happened
  }
  // everything is good
});
```

### [.middlewareSync](lib/router.js#L122)

* `file` **{Object}**: File object.    
* `returns` **{Object}**: object containing an `err` if an error occurred.  

Call the dispatcher on a `file` object.

### [.use](lib/router.js#L282)

Utilize the given middleware `fn` to the given `stage`, defaulting to `_*_`.

* `stage` **{String}**: Stage for when this middleware should be called    
* `fn` **{Function}**: Additional middleware functions to call during the stage    
* `returns` **{Router}**: for chaining.  

**Example:**

```js
router.use('init', function (a, b, next) {
  a.foo = {};
  b.bar = {};
  next();
});
```


## Author
 
**Jon Schlinkert**
 
+ [github/jonschlinkert](https://github.com/jonschlinkert)
+ [twitter/jonschlinkert](http://twitter.com/jonschlinkert) 
 
**Brian Woodward**
 
+ [github/doowb](https://github.com/doowb)
+ [twitter/doowb](http://twitter.com/doowb) 



## License
Copyright (c) 2014 Jon Schlinkert, contributors.  
Released under the MIT license

Based on previous work by:

Copyright (c) 2009-2014 TJ Holowaychuk <tj@vision-media.ca>
Copyright (c) 2012-2013 Jared Hanson <http://jaredhanson.net/>

***

_This file was generated by [verb-cli](https://github.com/assemble/verb-cli) on October 23, 2014._